<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Getting Started</title>
<link rel="stylesheet" href=".././doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.0">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;Boost.DI (Dependency Injection) 1.0">
<link rel="up" href="../index.html" title="Chapter&#160;1.&#160;Boost.DI (Dependency Injection) 1.0">
<link rel="prev" href="tutorial.html" title="Tutorial">
<link rel="next" href="scopes.html" title="Scopes">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src=".././boost.png"></td>
<td align="center"><a href=".././index.html">Home</a></td>
<td align="center"><a href=".././libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href=".././more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="tutorial.html"><img src=".././doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src=".././doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="scopes.html"><img src=".././doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="boost_di__dependency_injection_.getting_started"></a><a class="link" href="getting_started.html" title="Getting Started">Getting
    Started</a>
</h2></div></div></div>
<div class="toc"><dl class="toc">
<dt><span class="section"><a href="getting_started.html#boost_di__dependency_injection_.getting_started.constructor_injection">Constructor
      Injection</a></span></dt>
<dt><span class="section"><a href="getting_started.html#boost_di__dependency_injection_.getting_started.scope">Scope</a></span></dt>
<dt><span class="section"><a href="getting_started.html#boost_di__dependency_injection_.getting_started.binding">Binding</a></span></dt>
<dt><span class="section"><a href="getting_started.html#boost_di__dependency_injection_.getting_started.injector">Injector</a></span></dt>
<dt><span class="section"><a href="getting_started.html#boost_di__dependency_injection_.getting_started.module">Module</a></span></dt>
<dt><span class="section"><a href="getting_started.html#boost_di__dependency_injection_.getting_started.named_parameter">Named
      Parameter</a></span></dt>
<dt><span class="section"><a href="getting_started.html#boost_di__dependency_injection_.getting_started.provider">Provider</a></span></dt>
</dl></div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.getting_started.constructor_injection"></a><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.constructor_injection" title="Constructor Injection">Constructor
      Injection</a>
</h3></div></div></div>
<p>
        Constructor injection is the most powerful of the available injections. It
        guarantee initialized state of data members. Within DI, by default, is achieved
        without any additional work from the user than defining the constructor.
        Library will go through the constructors and choose the longest one to pass
        the dependencies.
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">example</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">example</span><span class="special">(</span><span class="keyword">int</span><span class="special">);</span>
    <span class="identifier">example</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">double</span><span class="special">);</span>
    <span class="identifier">example</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">double</span><span class="special">,</span> <span class="keyword">float</span><span class="special">);</span> <span class="comment">// will be deduced by DI</span>
<span class="special">};</span>
</pre>
<p>
      </p>
<p>
        If the default behavior should be changed there is a way of explicitly saying
        which constructor should be deduced by adding BOOST_DI_INJECT to the constructor
        definition.
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src=".././doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          DI is not able to distinguish between ambiguous constructors with the same
          (longest) amount of parameters, then BOOST_DI_INJECT has to be used to
          point which constructor should be dedced
        </p></td></tr>
</table></div>
<h4>
<a name="boost_di__dependency_injection_.getting_started.constructor_injection.h0"></a>
        <span class="phrase"><a name="boost_di__dependency_injection_.getting_started.constructor_injection.boost_di_inject"></a></span><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.constructor_injection.boost_di_inject">BOOST_DI_INJECT</a>
      </h4>
<p>
</p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">example</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">example</span><span class="special">(</span><span class="keyword">int</span><span class="special">);</span>
    <span class="identifier">BOOST_DI_INJECT</span><span class="special">(</span><span class="identifier">example</span><span class="special">,</span> <span class="keyword">int</span><span class="special">,</span> <span class="keyword">double</span><span class="special">);</span> <span class="comment">// will be deduced by DI</span>
    <span class="identifier">example</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">double</span><span class="special">,</span> <span class="keyword">float</span><span class="special">);</span>
<span class="special">};</span>
</pre>
<p>
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src=".././doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          In C++03 additional brackets are needed: <code class="computeroutput"><span class="identifier">BOOST_DI_INJECT</span><span class="special">(</span><span class="identifier">example</span><span class="special">,</span> <span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">double</span><span class="special">))</span></code>
        </p></td></tr>
</table></div>
<div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src=".././doc/src/images/tip.png"></td>
<th align="left">Tip</th>
</tr>
<tr><td align="left" valign="top"><p>
          Requirement of brackets in BOOST_DI_INJECT might be switched with <code class="computeroutput"><span class="identifier">BOOST_DI_CFG_INJECT_VA_ARGS</span></code> and <code class="computeroutput"><span class="identifier">BOOST_DI_CFG_INJECT_BRACKET</span></code>
        </p></td></tr>
</table></div>
<p>
        Sometimes we can't, in case of third party libraries, or just don't want
        to be so intrusive, then we can use constructor traits to define which constructor
        should be deduced by DI.
      </p>
<h4>
<a name="boost_di__dependency_injection_.getting_started.constructor_injection.h1"></a>
        <span class="phrase"><a name="boost_di__dependency_injection_.getting_started.constructor_injection.boost_di_inject_traits"></a></span><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.constructor_injection.boost_di_inject_traits">BOOST_DI_INJECT_TRAITS</a>
      </h4>
<p>
</p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">di</span> <span class="special">{</span>

<span class="keyword">template</span><span class="special">&lt;&gt;</span>
<span class="keyword">struct</span> <span class="identifier">ctor_traits</span><span class="special">&lt;</span><span class="identifier">example</span><span class="special">&gt;</span> <span class="special">{</span>
    <span class="identifier">BOOST_DI_INJECT_TRAITS</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">double</span><span class="special">,</span> <span class="keyword">float</span><span class="special">);</span>
<span class="special">};</span>

<span class="special">}}</span> <span class="comment">// boost::di</span>
</pre>
<p>
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src=".././doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          BOOST_DI_INJECT_TRAITS might be also defined within the class, useful in
          case of named parameters
        </p></td></tr>
</table></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.getting_started.scope"></a><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.scope" title="Scope">Scope</a>
</h3></div></div></div>
<p>
        Scopes are responsible for creating and maintaining the life time of the
        dependency. Boost.DI favor 5 types of scopes (deduce - default, external,
        unique, shared, session) which you can read more about in <code class="computeroutput"><span class="identifier">Scopes</span></code>
        section.
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">some_scope</span> <span class="special">{</span>
    <span class="keyword">typedef</span> <span class="identifier">mpl</span><span class="special">::</span><span class="identifier">int_</span><span class="special">&lt;</span><span class="identifier">N</span><span class="special">&gt;</span> <span class="identifier">priority</span><span class="special">;</span> <span class="comment">// N - priority, 1=lowest, N=highest</span>

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">TExpected</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">TGiven</span> <span class="special">=</span> <span class="identifier">TExpected</span><span class="special">&gt;</span>
    <span class="keyword">class</span> <span class="identifier">scope</span> <span class="special">{</span>
    <span class="keyword">public</span><span class="special">:</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span><span class="special">...</span> <span class="identifier">T</span><span class="special">&gt;</span>
        <span class="identifier">result_type</span> <span class="identifier">create</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
    <span class="special">};</span>
<span class="special">};</span>
</pre>
<p>
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.getting_started.binding"></a><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.binding" title="Binding">Binding</a>
</h3></div></div></div>
<p>
        Binding in DI is done by DSL. The main purpose of binding DSL is to make
        easy things as easy as possible whilst giving possibility to accomplish solutions
        for more complicated problems. The glue between DSL and the core is dependency,
        so if you would like to write your own front end the only thing which has
        to be in mind is to return list of dependencies.
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">typename</span> <span class="identifier">TScope</span>
  <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">TExpected</span>
  <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">TGiven</span>
  <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">TBind</span>
<span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">dependency</span><span class="special">;</span>
</pre>
<p>
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">If</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">Impl</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">bind</span>
    <span class="special">:</span> <span class="identifier">concepts</span><span class="special">::</span><span class="identifier">dependency</span><span class="special">&lt;</span><span class="identifier">scopes</span><span class="special">::</span><span class="identifier">deduce</span><span class="special">,</span> <span class="identifier">If</span><span class="special">,</span> <span class="identifier">Impl</span><span class="special">&gt;</span>
<span class="special">{</span> <span class="special">};</span>
</pre>
<p>
      </p>
<p>
        DSL released with the library allows you to bind:
      </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
            bind to interface
<pre class="programlisting"><span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">interface</span><span class="special">,</span> <span class="identifier">implementation</span><span class="special">&gt;</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">implementation</span><span class="special">&gt;</span>
</pre>
          </li>
<li class="listitem">
<p class="simpara">
            bind the same implementation to many interfaces
<pre class="programlisting"><span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">any_of</span><span class="special">&lt;</span><span class="identifier">interface1</span><span class="special">,</span> <span class="identifier">interface2</span><span class="special">,</span> <span class="special">...,</span> <span class="identifier">interfaceN</span><span class="special">&gt;,</span> <span class="identifier">implementation</span><span class="special">&gt;</span>
</pre>
          </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src=".././doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              The same might be achived with <code class="computeroutput"><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">implementation</span><span class="special">&gt;</span></code>
            </p></td></tr>
</table></div>
</li>
<li class="listitem">
            bind to compile time value
<pre class="programlisting"><span class="identifier">di</span><span class="special">::</span><span class="identifier">bind_int</span><span class="special">&lt;</span><span class="number">42</span><span class="special">&gt;()</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind_string</span><span class="special">&lt;</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">string</span><span class="special">&lt;</span><span class="char">'str'</span><span class="special">&gt;&gt;</span>
</pre>
          </li>
<li class="listitem">
            bind to runtime value
<pre class="programlisting"><span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;::</span><span class="identifier">to</span><span class="special">(</span><span class="number">42</span><span class="special">)</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;::</span><span class="identifier">to</span><span class="special">(</span><span class="string">"text"</span><span class="special">);</span>
</pre>
          </li>
<li class="listitem">
<p class="simpara">
            bind to external runtime value
<pre class="programlisting"><span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">example</span><span class="special">&gt;::</span><span class="identifier">to</span><span class="special">(</span><span class="identifier">make_shared</span><span class="special">&lt;</span><span class="identifier">example</span><span class="special">&gt;())</span> <span class="comment">// bind to shared_ptr</span>

<span class="identifier">example</span> <span class="identifier">example_</span><span class="special">;</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">example</span><span class="special">&gt;::</span><span class="identifier">to</span><span class="special">(</span><span class="identifier">cref</span><span class="special">(</span><span class="identifier">example_</span><span class="special">))</span> <span class="comment">// bind to const ref</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">example</span><span class="special">&gt;::</span><span class="identifier">to</span><span class="special">(</span><span class="identifier">ref</span><span class="special">(</span><span class="identifier">example_</span><span class="special">))</span> <span class="comment">// bind to ref</span>
</pre>
          </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src=".././doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              Boost implementation of cref/ref has to be used
            </p></td></tr>
</table></div>
</li>
</ul></div>
<p>
        On top of binding to values user can bind to named parameters or using context.
      </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
            bind using named parameters
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">my_value</span> <span class="special">{</span> <span class="special">};</span>
<span class="keyword">class</span> <span class="identifier">my_if</span> <span class="special">{</span> <span class="special">};</span>

<span class="identifier">stuct</span> <span class="identifier">example</span> <span class="special">{</span>
    <span class="identifier">example</span><span class="special">(</span><span class="identifier">di</span><span class="special">::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">my_value</span><span class="special">&gt;</span> <span class="identifier">value</span><span class="special">,</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span><span class="identifier">interface</span><span class="special">&gt;,</span> <span class="identifier">my_if</span><span class="special">&gt;);</span>
<span class="special">};</span>

<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind_int</span><span class="special">&lt;</span><span class="number">42</span><span class="special">&gt;::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">my_value</span><span class="special">&gt;()</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">my_value</span><span class="special">&gt;::</span><span class="identifier">to</span><span class="special">(</span><span class="number">42</span><span class="special">)</span>

<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">interface</span><span class="special">,</span> <span class="identifier">implementation</span><span class="special">&gt;::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">my_if</span><span class="special">&gt;()</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">implementation</span><span class="special">&gt;::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">my_if</span><span class="special">&gt;()</span>
</pre>
          </li>
<li class="listitem">
<p class="simpara">
            bind using call stack context
<pre class="programlisting"><span class="identifier">call_stack</span><span class="special">&lt;</span><span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c2</span><span class="special">,</span> <span class="special">...,</span> <span class="identifier">cN</span><span class="special">&gt;</span> <span class="comment">// call stack definition</span>

<span class="keyword">class</span> <span class="identifier">c2</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">c2</span><span class="special">(</span><span class="identifier">unique_ptr</span><span class="special">&lt;</span><span class="identifier">interface</span><span class="special">&gt;);</span>
<span class="special">};</span>

<span class="keyword">class</span> <span class="identifier">c1</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">c1</span><span class="special">(</span><span class="identifier">c2</span><span class="special">);</span>
<span class="special">};</span>

<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">interface</span><span class="special">,</span> <span class="identifier">implementation</span><span class="special">&gt;::</span><span class="identifier">when</span><span class="special">&lt;</span><span class="identifier">call_stack</span><span class="special">&lt;</span><span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c2</span><span class="special">&gt;&gt;()</span>
</pre>
          </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src=".././doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <code class="computeroutput"><span class="identifier">BOOST_DI_CFG_EXAMINE_CALL_STACK</span></code>
              has to be defined to enable this features
            </p></td></tr>
</table></div>
</li>
<li class="listitem">
            bind using call stack context and named parameters
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">c2</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">c2</span><span class="special">(</span><span class="identifier">di</span><span class="special">::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">unique_ptr</span><span class="special">&lt;</span><span class="identifier">interface</span><span class="special">&gt;,</span> <span class="identifier">my_if</span><span class="special">&gt;);</span>
<span class="special">};</span>

<span class="keyword">class</span> <span class="identifier">c1</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">c1</span><span class="special">(</span><span class="identifier">c2</span><span class="special">);</span>
<span class="special">};</span>

<span class="comment">// bind interface to implementation for named</span>
<span class="comment">// parameter `my_if` when the class `c2` was created from class `c1`</span>

<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">interface</span><span class="special">,</span> <span class="identifier">implementation</span><span class="special">&gt;::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">my_if</span><span class="special">&gt;::</span><span class="identifier">when</span><span class="special">&lt;</span><span class="identifier">call_stack</span><span class="special">&lt;</span><span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c2</span><span class="special">&gt;&gt;()</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">implementation</span><span class="special">&gt;::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">my_if</span><span class="special">&gt;::</span><span class="identifier">when</span><span class="special">&lt;</span><span class="identifier">call_stack</span><span class="special">&lt;</span><span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c2</span><span class="special">&gt;&gt;()</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">interface</span><span class="special">,</span> <span class="identifier">implementation</span><span class="special">&gt;::</span><span class="identifier">when</span><span class="special">&lt;</span><span class="identifier">call_stack</span><span class="special">&lt;</span><span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c2</span><span class="special">&gt;&gt;::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">my_if</span><span class="special">&gt;()</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">implementation</span><span class="special">&gt;::</span><span class="identifier">when</span><span class="special">&lt;</span><span class="identifier">call_stack</span><span class="special">&lt;</span><span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c2</span><span class="special">&gt;&gt;::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="identifier">my_if</span><span class="special">&gt;()</span>

<span class="comment">// all bindings above are equivalent</span>
</pre>
          </li>
</ul></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.getting_started.injector"></a><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.injector" title="Injector">Injector</a>
</h3></div></div></div>
<p>
        Injector is a component used for creating dependencies configuration using
        bindings. Injector might be created using <code class="computeroutput"><span class="identifier">di</span><span class="special">::</span><span class="identifier">make_injector</span></code>
        or <code class="computeroutput"><span class="identifier">di</span><span class="special">::</span><span class="identifier">injector</span> <span class="identifier">type</span></code>
        it self. Preferable option is to use di::make_injector because it allows
        to bind dynamic values.
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">auto</span> <span class="identifier">injector</span> <span class="special">=</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">make_injector</span><span class="special">();</span>
</pre>
<p>
      </p>
<p>
        or
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">using</span> <span class="identifier">injector_t</span> <span class="special">=</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">injector</span><span class="special">&lt;&gt;;</span>
<span class="keyword">auto</span> <span class="identifier">injector</span> <span class="special">=</span> <span class="identifier">injector_t</span><span class="special">();</span>
</pre>
<p>
      </p>
<p>
        With <code class="computeroutput"><span class="identifier">injector</span> <span class="identifier">type</span></code>
</p>
<pre class="programlisting"><span class="keyword">using</span> <span class="identifier">injector</span> <span class="special">=</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">injector</span><span class="special">&lt;</span><span class="identifier">implementation</span><span class="special">&gt;;</span> <span class="comment">// equals di::injector&lt;di::deduce&lt;implementation&gt;&gt;</span>
</pre>
<p>
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">auto</span> <span class="identifier">injector</span> <span class="special">=</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">make_injector</span><span class="special">(</span>
    <span class="identifier">di</span><span class="special">::</span><span class="identifier">deduce</span><span class="special">&lt;</span><span class="identifier">implementation</span><span class="special">&gt;()</span>
<span class="special">);</span>
</pre>
<p>
      </p>
<p>
        create call visit
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.getting_started.module"></a><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.module" title="Module">Module</a>
</h3></div></div></div>
<p>
</p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">module</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="keyword">auto</span> <span class="identifier">configure</span><span class="special">()</span> <span class="keyword">const</span> <span class="special">{</span>
        <span class="keyword">return</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">make_injector</span><span class="special">(</span>
            <span class="special">...</span>
        <span class="special">);</span>
    <span class="special">}</span>
<span class="special">}</span>
</pre>
<p>
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.getting_started.named_parameter"></a><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.named_parameter" title="Named Parameter">Named
      Parameter</a>
</h3></div></div></div>
<p>
        Named parameters are useful when the constructor has more parameters of the
        same type.
</p>
<pre class="programlisting"><span class="identifier">example</span><span class="special">(</span><span class="keyword">int</span> <span class="identifier">value1</span><span class="special">,</span> <span class="keyword">int</span> <span class="identifier">value2</span><span class="special">);</span>
</pre>
<p>
        In order to inject proper values to value and value2 they have to distinguish
        somehow. Boost.DI solution for this are <code class="computeroutput"><span class="identifier">named</span>
        <span class="identifier">parameters</span></code>, which basically are
        just wrappers for the type with automatic conversion to the based type.
</p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">my_name</span> <span class="special">{</span> <span class="special">};</span>
<span class="identifier">di</span><span class="special">::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">my_name</span><span class="special">&gt;</span> <span class="identifier">named_parameter</span><span class="special">;</span>
<span class="keyword">int</span> <span class="identifier">i</span> <span class="special">=</span> <span class="identifier">named_parameter</span><span class="special">;</span>
</pre>
<p>
      </p>
<p>
        Named parameters are intrusive in a sens constructor has to be changed in
        order to support them. It doesn't has to be the case when constructor traits
        are being used.
</p>
<pre class="programlisting">    <span class="keyword">class</span> <span class="identifier">example</span> <span class="special">{</span>
    <span class="keyword">public</span><span class="special">:</span>
        <span class="identifier">example</span><span class="special">(</span><span class="keyword">int</span> <span class="identifier">value1</span><span class="special">,</span> <span class="keyword">int</span> <span class="identifier">value2</span><span class="special">);</span>
    <span class="special">};</span>

    <span class="keyword">class</span> <span class="identifier">my_value1</span> <span class="special">{</span> <span class="special">};</span>
    <span class="keyword">class</span> <span class="identifier">my_value2</span> <span class="special">{</span> <span class="special">};</span>

    <span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">di</span> <span class="special">{</span>

    <span class="keyword">template</span><span class="special">&lt;&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">ctor_traits</span><span class="special">&lt;</span><span class="identifier">example</span><span class="special">&gt;</span> <span class="special">{</span>
        <span class="identifier">BOOST_DI_INJECT_TRAITS</span><span class="special">(</span><span class="identifier">di</span><span class="special">::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">my_value1</span><span class="special">&gt;,</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">my_value2</span><span class="special">&gt;);</span>
    <span class="special">};</span>

<span class="special">}}</span> <span class="comment">// boost::di</span>
</pre>
<p>
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.getting_started.provider"></a><a class="link" href="getting_started.html#boost_di__dependency_injection_.getting_started.provider" title="Provider">Provider</a>
</h3></div></div></div>
<p>
        With normal dependency injection, each type gets exactly one instance of
        each of its dependent types. Sometimes it's required to get many different
        instances. Then providers become handy. They produce a value when the get()
        method is invoked.
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">provider</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="keyword">virtual</span> <span class="special">~</span><span class="identifier">provider</span><span class="special">()</span> <span class="special">{</span> <span class="special">}</span>
    <span class="keyword">virtual</span> <span class="identifier">T</span> <span class="identifier">get</span><span class="special">()</span> <span class="keyword">const</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
<span class="special">};</span>
</pre>
<p>
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">example</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">example</span><span class="special">(</span><span class="identifier">provider</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">p</span><span class="special">)</span> <span class="special">{</span>
        <span class="identifier">assert</span><span class="special">(</span><span class="identifier">p</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">!=</span> <span class="identifier">p</span><span class="special">.</span><span class="identifier">get</span><span class="special">());</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">class</span> <span class="identifier">provider</span> <span class="special">:</span> <span class="identifier">iprovider</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="keyword">int</span> <span class="identifier">get</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">override</span> <span class="special">{</span>
        <span class="keyword">static</span> <span class="keyword">int</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
        <span class="keyword">return</span> <span class="identifier">i</span><span class="special">++;</span>
    <span class="special">}</span>
<span class="special">};</span>
</pre>
<p>
      </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2014 Krzysztof Jusiak<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="tutorial.html"><img src=".././doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src=".././doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="scopes.html"><img src=".././doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
