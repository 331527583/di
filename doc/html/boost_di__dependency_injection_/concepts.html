<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Concepts</title>
<link rel="stylesheet" href=".././doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.0">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;Boost.DI (Dependency Injection) 1.0">
<link rel="up" href="../index.html" title="Chapter&#160;1.&#160;Boost.DI (Dependency Injection) 1.0">
<link rel="prev" href="tutorial.html" title="Tutorial">
<link rel="next" href="scopes.html" title="Scopes">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src=".././boost.png"></td>
<td align="center"><a href=".././index.html">Home</a></td>
<td align="center"><a href=".././libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href=".././more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="tutorial.html"><img src=".././doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src=".././doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="scopes.html"><img src=".././doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="boost_di__dependency_injection_.concepts"></a><a class="link" href="concepts.html" title="Concepts">Concepts</a>
</h2></div></div></div>
<div class="toc"><dl class="toc">
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection">Constructor
      Injection</a></span></dt>
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.binding">Binding</a></span></dt>
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.injector">Injector</a></span></dt>
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.named_parameters">Named
      Parameters</a></span></dt>
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.provider">Provider</a></span></dt>
</dl></div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.concepts.constructor_injection"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection" title="Constructor Injection">Constructor
      Injection</a>
</h3></div></div></div>
<div class="toc"><dl class="toc">
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection.boost_di_inject">BOOST_DI_INJECT</a></span></dt>
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection.boost_di_inject_traits">BOOST_DI_INJECT_TRAITS</a></span></dt>
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection.boost_di_create">BOOST_DI_CREATE</a></span></dt>
<dt><span class="section"><a href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection.di__ctor_traits">di::ctor_traits</a></span></dt>
</dl></div>
<p>
        Constructor injection is straightforward. Because Java technology guarantees
        constructor invocation, you don't need to worry about objects arriving in
        an uninitialized state &#8212; whether or not Guice creates them. You can also
        mark your fields final. According to the Guice best practices guide, constructor
        injection is the preferred way to ask for your dependencies
      </p>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_di__dependency_injection_.concepts.constructor_injection.boost_di_inject"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection.boost_di_inject" title="BOOST_DI_INJECT">BOOST_DI_INJECT</a>
</h4></div></div></div>
<div class="table">
<a name="boost_di__dependency_injection_.concepts.constructor_injection.boost_di_inject.boost_di_inject"></a><p class="title"><b>Table&#160;1.1.&#160;BOOST_DI_INJECT</b></p>
<div class="table-contents"><table class="table" summary="BOOST_DI_INJECT">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td>
                  <p>
                    struct c { BOOST_DI_INJECT(c, int i = 0, double = 0.0) { } };
                  </p>
                </td>
<td>
                  <p>
                    struct c { static void boost_di_ctor__(int i = 0, double = 0.0);
                    c(int i = 0, double = 0.0) { } };
                  </p>
                </td>
</tr></tbody>
</table></div>
</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_di__dependency_injection_.concepts.constructor_injection.boost_di_inject_traits"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection.boost_di_inject_traits" title="BOOST_DI_INJECT_TRAITS">BOOST_DI_INJECT_TRAITS</a>
</h4></div></div></div>
<div class="table">
<a name="boost_di__dependency_injection_.concepts.constructor_injection.boost_di_inject_traits.boost_di_inject_traits"></a><p class="title"><b>Table&#160;1.2.&#160;BOOST_DI_INJECT_TRAITS</b></p>
<div class="table-contents"><table class="table" summary="BOOST_DI_INJECT_TRAITS">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td>
                  <p>
                    struct c { BOOST_DI_INJECT_TRAITS(int, named&lt;double, my_name&gt;);
                    c(int, double) { } };
                  </p>
                </td>
<td>
                  <p>
                    struct c { static void boost_di_ctor__(int, named&lt;double,
                    my_name&gt;); c(int, double) { } };
                  </p>
                </td>
</tr></tbody>
</table></div>
</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_di__dependency_injection_.concepts.constructor_injection.boost_di_create"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection.boost_di_create" title="BOOST_DI_CREATE">BOOST_DI_CREATE</a>
</h4></div></div></div>
<div class="table">
<a name="boost_di__dependency_injection_.concepts.constructor_injection.boost_di_create.boost_di_create"></a><p class="title"><b>Table&#160;1.3.&#160;BOOST_DI_CREATE</b></p>
<div class="table-contents"><table class="table" summary="BOOST_DI_CREATE">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td>
                  <p>
                    struct i_factory { i* BOOST_DI_CREATE(int i) { if (i) { return
                    new impl(); }
                  </p>
                  <p>
                    return nullptr; } };
                  </p>
                </td>
<td>
                  <p>
                    struct i_factory { i* boost_di_create__(int i) { if (i) { return
                    new impl(); }
                  </p>
                  <p>
                    return nullptr; } };
                  </p>
                </td>
</tr></tbody>
</table></div>
</div>
<br class="table-break"><pre class="programlisting"><span class="keyword">class</span> <span class="identifier">i_factory</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">i</span><span class="special">*</span> <span class="identifier">BOOST_DI_CREATE</span><span class="special">(</span><span class="identifier">eid</span> <span class="identifier">id</span><span class="special">)</span> <span class="special">{</span>
        <span class="keyword">switch</span><span class="special">(</span><span class="identifier">id</span><span class="special">)</span> <span class="special">{</span>
            <span class="keyword">case</span> <span class="identifier">e1</span><span class="special">:</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="identifier">impl1</span><span class="special">();</span>
            <span class="keyword">case</span> <span class="identifier">e2</span><span class="special">:</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="identifier">impl2</span><span class="special">();</span>
        <span class="special">}</span>

        <span class="keyword">return</span> <span class="keyword">nullptr</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
    <span class="keyword">auto</span> <span class="identifier">injector</span> <span class="special">=</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">make_injector</span><span class="special">(</span>
        <span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">eid</span><span class="special">&gt;::</span><span class="identifier">to</span><span class="special">(</span><span class="identifier">e1</span><span class="special">)</span>
      <span class="special">,</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">i</span><span class="special">,</span> <span class="identifier">i_factory</span><span class="special">&gt;()</span>
    <span class="special">);</span>

    <span class="identifier">injector</span><span class="special">.</span><span class="identifier">create</span><span class="special">&lt;</span><span class="identifier">c</span><span class="special">&gt;();</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_di__dependency_injection_.concepts.constructor_injection.di__ctor_traits"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.constructor_injection.di__ctor_traits" title="di::ctor_traits">di::ctor_traits</a>
</h4></div></div></div>
<pre class="programlisting"><span class="keyword">struct</span> <span class="identifier">c</span>
<span class="special">{</span>
    <span class="identifier">c</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">int</span><span class="special">)</span> <span class="special">{</span> <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span>
<span class="keyword">namespace</span> <span class="identifier">di</span> <span class="special">{</span>

<span class="keyword">template</span><span class="special">&lt;&gt;</span>
<span class="keyword">struct</span> <span class="identifier">ctor_traits</span><span class="special">&lt;</span><span class="identifier">c</span><span class="special">&gt;</span>
<span class="special">{</span>
    <span class="keyword">static</span> <span class="keyword">void</span> <span class="identifier">ctor</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">named</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">name</span><span class="special">&gt;);</span>
<span class="special">};</span>

<span class="special">}</span> <span class="comment">// namespace di</span>
<span class="special">}</span> <span class="comment">// namespace boost</span>

<span class="identifier">injector</span><span class="special">.</span><span class="identifier">create</span><span class="special">&lt;</span><span class="identifier">c</span><span class="special">&gt;();</span>
</pre>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.concepts.binding"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.binding" title="Binding">Binding</a>
</h3></div></div></div>
<p>
        DI is designed to do popular things easy:
      </p>
<p>
        bind&lt;int&gt;::in_call&lt;call_stack&lt;c1&gt;, call_stack&lt;c1, c2, c3&gt;&gt;()
      </p>
<p>
        Binding Resolution
      </p>
<p>
        The injector's process of resolving an injection request depends on the bindings
        and the annotations of the types involved. Here's how an injection request
        is resolved:
      </p>
<p>
        Use explicit bindings. If the binding links to another, follow this resolution
        algorithm for that. If the binding specifies an instance, return that. If
        the binding specifies a provider, use that. Ask a parent injector. If this
        injector has a parent injector, ask that to resolve the binding. If it succeeds,
        use that. Otherwise proceed. Ask child injectors. If any child injector already
        has this binding, give up. A blacklist of bindings from child injectors is
        kept so injectors don't need to maintain references to their child injectors.
        Handle Provider injections. If the type is Provider&lt;T&gt;, resolve T instead,
        using the same binding annotation, if it exists. Convert constants. If there
        is a constant string bound with the same annotation, and a TypeConverter
        that supports this type, use the converted String. If the dependency has
        a binding annotation, give up. Guice will not create default bindings for
        annotated dependencies. If the dependency is an array or enum, give up. Handle
        TypeLiteral injections. If the type is TypeLiteral&lt;T&gt;, inject that
        value, using context for the value of the type parameter. Use resolution
        annotations. If the dependency's type has @ImplementedBy or @ProvidedBy,
        lookup the binding for the referenced type and use that. If the dependency
        is abstract or a non-static inner class, give up. Use a single @Inject or
        public no-arguments constructor. Validate bindings for all dependencies &#8212;
        the constructor's parameters, plus @Inject methods and fields of the type
        and all supertypes. Invoke the constructor. Inject all fields. Supertype
        fields are injected before subtype fields. Inject all methods. Supertype
        methods are injected before subtype methods.
      </p>
</div>
<div class="section"><div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.concepts.injector"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.injector" title="Injector">Injector</a>
</h3></div></div></div></div>
<div class="section"><div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.concepts.named_parameters"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.named_parameters" title="Named Parameters">Named
      Parameters</a>
</h3></div></div></div></div>
<div class="section"><div class="titlepage"><div><div><h3 class="title">
<a name="boost_di__dependency_injection_.concepts.provider"></a><a class="link" href="concepts.html#boost_di__dependency_injection_.concepts.provider" title="Provider">Provider</a>
</h3></div></div></div></div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2014 Krzysztof Jusiak<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="tutorial.html"><img src=".././doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src=".././doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="scopes.html"><img src=".././doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
