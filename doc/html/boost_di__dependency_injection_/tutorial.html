<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Tutorial</title>
<link rel="stylesheet" href=".././doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.0">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;Boost.DI (Dependency Injection) 1.0">
<link rel="up" href="../index.html" title="Chapter&#160;1.&#160;Boost.DI (Dependency Injection) 1.0">
<link rel="prev" href="desing_rationale.html" title="Desing Rationale">
<link rel="next" href="concepts.html" title="Concepts">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src=".././boost.png"></td>
<td align="center"><a href=".././index.html">Home</a></td>
<td align="center"><a href=".././libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href=".././more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="desing_rationale.html"><img src=".././doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src=".././doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="concepts.html"><img src=".././doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="boost_di__dependency_injection_.tutorial"></a><a class="link" href="tutorial.html" title="Tutorial">Tutorial</a>
</h2></div></div></div>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
              <p>
                Write your code so it's flexible...
              </p>
            </th>
<th>
              <p>
                ...and let DI glue it together for you
              </p>
            </th>
</tr></thead>
<tbody><tr>
<td>
              <p>
</p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">class</span> <span class="identifier">Samurai</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">Samurai</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span><span class="identifier">IWeapon</span><span class="special">&gt;</span> <span class="identifier">weapon</span><span class="special">)</span>
        <span class="special">:</span> <span class="identifier">weapon</span><span class="special">(</span><span class="identifier">weapon</span><span class="special">)</span>
    <span class="special">{</span> <span class="special">}</span>

<span class="keyword">private</span><span class="special">:</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span><span class="identifier">IWeapon</span><span class="special">&gt;</span> <span class="identifier">weapon</span><span class="special">;</span>
<span class="special">};</span>
</pre>
<p>
              </p>
            </td>
<td>
              <p>
</p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting">      <span class="keyword">using</span> <span class="identifier">injector_t</span> <span class="special">=</span> <span class="identifier">di</span><span class="special">::</span><span class="identifier">injector</span><span class="special">&lt;</span><span class="identifier">Sword</span><span class="special">&gt;;</span>
<span class="comment">// or using injector_t = di::injector&lt;bind&lt;IWeapon, Sword&gt;&gt;</span>
</pre>
<p>
              </p>
            </td>
</tr></tbody>
</table></div>
<p>
      But first, Guice needs to be configured to build the graph exactly as you want
      it. To illustrate, we'll start the RealBillingService class that accepts its
      dependent interfaces CreditCardProcessor and TransactionLog in its constructor.
      To make it explicit that the RealBillingService constructor is invoked by Guice,
      we add the BOOST_DI_CTOR: "
    </p>
<p>
      configure:
    </p>
<p>
      using config = injector&lt;DatabaseTransactionLog&gt;; or using config = injector&lt;bind&lt;TransactionLog,
      DatabaseTransactionLog&gt;&gt;;
    </p>
<p>
      using config = injector&lt;PaypalCreditCardProcessor&gt;; or using config =
      injector&lt;bind&lt;CreditCardProcessor, PaypalCreditCardProcessor&gt;&gt;;
    </p>
<p>
      The modules are the building blocks of an injector, which is Guice's object-graph
      builder
    </p>
<p>
      auto billingService = config().create&lt;RealBillingService&gt;(); auto billingService
      = make_injector(config()).create&lt;RealBillingService&gt;();
    </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2014 Krzysztof Jusiak<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="desing_rationale.html"><img src=".././doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src=".././doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="concepts.html"><img src=".././doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
